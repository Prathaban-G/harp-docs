<!doctype html>
<html lang="en" dir="ltr"
    class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-deployment/step4"
    data-has-hydrated="false">

<!-- Mirrored from harp-docs.vercel.app/docs/deployment/step4 by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 09 Mar 2024 21:36:07 GMT -->
<!-- Added by HTTrack -->
<meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->

<head>
    <meta charset="UTF-8">
    <meta name="generator" content="Docusaurus v3.1.1">
    <title data-rh="true">Step 4: Adding Users (Clients) | Harp Documentation</title>
    <meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1">
    <meta data-rh="true" name="twitter:card" content="summary_large_image">
    <meta data-rh="true" property="og:image" content="../../img/login-page-logo.png">
    <meta data-rh="true" name="twitter:image" content="../../img/login-page-logo.png">
    <meta data-rh="true" property="og:url" content="step4">
    <meta data-rh="true" property="og:locale" content="en">
    <meta data-rh="true" name="docusaurus_locale" content="en">
    <meta data-rh="true" name="docsearch:language" content="en">
    <meta data-rh="true" name="docusaurus_version" content="current">
    <meta data-rh="true" name="docusaurus_tag" content="docs-default-current">
    <meta data-rh="true" name="docsearch:version" content="current">
    <meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current">
    <meta data-rh="true" property="og:title" content="Step 4: Adding Users (Clients) | Harp Documentation">
    <meta data-rh="true" name="description" content="Overview:">
    <meta data-rh="true" property="og:description" content="Overview:">
    <link data-rh="true" rel="icon" href="../../img/favicon.ico">
    <link data-rh="true" rel="canonical" href="step4">
    <link data-rh="true" rel="alternate" href="step4" hreflang="en">
    <link data-rh="true" rel="alternate" href="step4" hreflang="x-default">
    <link rel="alternate" type="application/rss+xml" href="../../blog/rss.xml" title="Harp Documentation RSS Feed">
    <link rel="alternate" type="application/atom+xml" href="../../blog/atom.xml" title="Harp Documentation Atom Feed">
    <link rel="stylesheet" href="../../assets/css/styles.3768ca93.css">
    <script src="../../assets/js/runtime_main.8a1fa19d.js" defer="defer"></script>
    <script src="../../assets/js/main.df785b98.js" defer="defer"></script>
</head>

<body class="navigation-with-keyboard">
    <script>!function () { function t(t) { document.documentElement.setAttribute("data-theme", t) } var e = function () { try { return new URLSearchParams(window.location.search).get("docusaurus-theme") } catch (t) { } }() || function () { try { return localStorage.getItem("theme") } catch (t) { } }(); t(null !== e ? e : "light") }(), function () { try { const c = new URLSearchParams(window.location.search).entries(); for (var [t, e] of c) if (t.startsWith("docusaurus-data-")) { var a = t.replace("docusaurus-data-", "data-"); document.documentElement.setAttribute(a, e) } } catch (t) { } }()</script>
    <div id="__docusaurus">
        <div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn"
                href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div>
                <nav aria-label="Main" class="navbar navbar--fixed-top">
                    <div class="navbar__inner">
                        <div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false"
                                class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30"
                                    aria-hidden="true">
                                    <path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"
                                        d="M4 7h22M4 15h22M4 23h22"></path>
                                </svg></button><a class="navbar__brand" href="../../index.html">
                                <div class="navbar__logo"><img src="../../img/login-page-logo.png" alt="harp-logo"
                                        class="themedComponent_mlkZ themedComponent--light_NVdE" width="130px"><img
                                        src="../../img/login-page-logo.png" alt="harp-logo"
                                        class="themedComponent_mlkZ themedComponent--dark_xIcU" width="130px"></div><b
                                    class="navbar__title text--truncate"></b>
                            </a><a class="navbar__item navbar__link" href="../hardware/step1-install-os.html">Hardware</a><a
                                class="navbar__item navbar__link" href="../software/intro.html">Software</a><a aria-current="page"
                                class="navbar__item navbar__link navbar__link--active" href="intro.html">Deployment</a></div>
                        <div class="navbar__items navbar__items--right">
                            <div class="toggle_vylO colorModeToggle_DEke"></div>
                            <div class="navbarSearchContainer_Bca1"></div>
                        </div>
                    </div>
                    <div role="presentation" class="navbar-sidebar__backdrop"></div>
                </nav>
        <div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0">
            <div class="docsWrapper_hBAB"><button aria-label="Scroll back to top"
                    class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button>
                <div class="docRoot_UBD9">
                    <aside class="theme-doc-sidebar-container docSidebarContainer_YfHR">
                        <div class="sidebarViewport_aRkj">
                            <div class="sidebar_njMd">
                                <nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG">
                                    <ul class="theme-doc-sidebar-menu menu__list">
                                        <li
                                            class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item">
                                            <div class="menu__list-item-collapsible"><a
                                                    class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active"
                                                    aria-expanded="true" href="intro.html">Deployment</a></div>
                                            <ul style="display:block;overflow:visible;height:auto" class="menu__list">
                                                <li
                                                    class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item">
                                                    <a class="menu__link" tabindex="0" href="intro.html">Setting up a PiVPN
                                                        Server on AWS</a></li>
                                                <li
                                                    class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item">
                                                    <a class="menu__link" tabindex="0" href="step1.html">Step 1: Setting Up
                                                        AWS Instance</a></li>
                                                <li
                                                    class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item">
                                                    <a class="menu__link" tabindex="0" href="step2.html">Step 2: Installing
                                                        PiVPN</a></li>
                                                <li
                                                    class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item">
                                                    <a class="menu__link" tabindex="0" href="step3.html">Step 3: Configuring
                                                        OpenVPN</a></li>
                                                <li
                                                    class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item">
                                                    <a class="menu__link menu__link--active" aria-current="page"
                                                        tabindex="0" href="step4.html">Step 4: Adding Users (Clients)</a>
                                                </li>
                                            </ul>
                                        </li>
                                    </ul>
                                </nav>
                            </div>
                        </div>
                    </aside>
                    <main class="docMainContainer_TBSr">
                        <div class="container padding-top--md padding-bottom--lg">
                            <div class="row">
                                <div class="col docItemCol_VOVn">
                                    <div class="docItemContainer_Djhp">
                                        <article>
                                            <nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl"
                                                aria-label="Breadcrumbs">
                                                <ul class="breadcrumbs" itemscope=""
                                                    itemtype="https://schema.org/BreadcrumbList">
                                                    <li class="breadcrumbs__item"><a aria-label="Home page"
                                                            class="breadcrumbs__link" href="../../index.html"><svg
                                                                viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT">
                                                                <path
                                                                    d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z"
                                                                    fill="currentColor"></path>
                                                            </svg></a></li>
                                                    <li class="breadcrumbs__item"><span
                                                            class="breadcrumbs__link">Deployment</span>
                                                        <meta itemprop="position" content="1">
                                                    </li>
                                                    <li itemscope="" itemprop="itemListElement"
                                                        itemtype="https://schema.org/ListItem"
                                                        class="breadcrumbs__item breadcrumbs__item--active"><span
                                                            class="breadcrumbs__link" itemprop="name">Step 4: Adding
                                                            Users (Clients)</span>
                                                        <meta itemprop="position" content="2">
                                                    </li>
                                                </ul>
                                            </nav>
                                            <div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button
                                                    type="button" class="clean-btn tocCollapsibleButton_TO0P">On this
                                                    page</button></div>
                                            <div class="theme-doc-markdown markdown">
                                                <h1>Step 4: Adding Users (Clients)</h1>
                                                <h2 class="anchor anchorWithStickyNavbar_LWe7" id="overview">Overview:<a
                                                        href="#overview" class="hash-link"
                                                        aria-label="Direct link to Overview:"
                                                        title="Direct link to Overview:">​</a></h2>
                                                <p>In this step, we&#x27;ll be adding users to our OpenVPN server. There
                                                    are two types of users: TIA Portal users on Windows and devices
                                                    connected to the PLC. The distinction lies in the configuration
                                                    applied to each user.</p>
                                                <p>For users accessing the PLC, an additional configuration line, iroute
                                                    192.168.3.0 255.255.255.0, will be added. This line directs the
                                                    OpenVPN server to route traffic to the specified subnet
                                                    (192.168.3.0/24) through the VPN tunnel, enabling access to devices
                                                    connected to the PLC.</p>
                                                <p>However, for TIA Portal users on Windows, this additional
                                                    configuration is not necessary. They will connect to the VPN without
                                                    needing specific routing instructions.</p>
                                                <h2 class="anchor anchorWithStickyNavbar_LWe7"
                                                    id="adding-users-to-pivpn">Adding Users to PiVPN<a
                                                        href="#adding-users-to-pivpn" class="hash-link"
                                                        aria-label="Direct link to Adding Users to PiVPN"
                                                        title="Direct link to Adding Users to PiVPN">​</a></h2>
                                                <ol>
                                                    <li><strong>Access PiVPN:</strong>
                                                        <ul>
                                                            <li>Log in to your PiVPN server.</li>
                                                        </ul>
                                                    </li>
                                                    <li><strong>Add User:</strong></li>
                                                </ol>
                                                <p><strong>Run the following command to add a user without a password
                                                        prompt:</strong></p>
                                                <div class="language-bash codeBlockContainer_Ckt0 theme-code-block"
                                                    style="--prism-color:#F8F8F2;--prism-background-color:#282A36">
                                                    <div class="codeBlockContent_biex">
                                                        <pre tabindex="0"
                                                            class="prism-code language-bash codeBlock_bY9V thin-scrollbar"
                                                            style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">pivpn </span><span class="token function" style="color:rgb(80, 250, 123)">add</span><span class="token plain"> nopass</span><br></span></code></pre>
                                                        <div class="buttonGroup__atx"><button type="button"
                                                                aria-label="Copy code to clipboard" title="Copy"
                                                                class="clean-btn"><span class="copyButtonIcons_eSgA"
                                                                    aria-hidden="true"><svg viewBox="0 0 24 24"
                                                                        class="copyButtonIcon_y97N">
                                                                        <path fill="currentColor"
                                                                            d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z">
                                                                        </path>
                                                                    </svg><svg viewBox="0 0 24 24"
                                                                        class="copyButtonSuccessIcon_LjdS">
                                                                        <path fill="currentColor"
                                                                            d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z">
                                                                        </path>
                                                                    </svg></span></button></div>
                                                    </div>
                                                </div>
                                                <ol start="3">
                                                    <li>
                                                        <p><strong>Enter Name - Naming Convention</strong>
                                                            We must assign a specific filename to the profile for
                                                            organizational purposes. naming convention will be as
                                                            <code>ovpn-{serial-id-hardware}</code> to denote the
                                                            hardware serial ID.</p>
                                                    </li>
                                                    <li>
                                                        <p><strong>Certificate Expiration (Optional):</strong></p>
                                                    </li>
                                                </ol>
                                                <p>Press Enter to accept the default certificate expiration period. This
                                                    will typically be set according to the default configuration of
                                                    PiVPN.</p>
                                                <ol start="5">
                                                    <li>Certificate Location:</li>
                                                </ol>
                                                <p>After the user is added, the certificate will be saved in the
                                                    <code>/home/ubuntu/ovpns</code> directory by default. This directory
                                                    contains all the generated OpenVPN client profiles. You can copy the
                                                    file and share it with the devices or with the users.</p>
                                                <h2 class="anchor anchorWithStickyNavbar_LWe7"
                                                    id="configuring-users-for-different-purposes">Configuring Users for
                                                    Different Purposes<a
                                                        href="#configuring-users-for-different-purposes"
                                                        class="hash-link"
                                                        aria-label="Direct link to Configuring Users for Different Purposes"
                                                        title="Direct link to Configuring Users for Different Purposes">​</a>
                                                </h2>
                                                <p>When configuring users for your OpenVPN server, it&#x27;s important
                                                    to consider the specific requirements of each type of user. In this
                                                    case, we have two distinct user groups: TIA Portal users on Windows
                                                    and devices connected to the PLC. The configuration for each group
                                                    varies based on their access needs.</p>
                                                <h3 class="anchor anchorWithStickyNavbar_LWe7"
                                                    id="tia-portal-users-no-configuration-required">TIA Portal Users (No
                                                    Configuration Required):<a
                                                        href="#tia-portal-users-no-configuration-required"
                                                        class="hash-link"
                                                        aria-label="Direct link to TIA Portal Users (No Configuration Required):"
                                                        title="Direct link to TIA Portal Users (No Configuration Required):">​</a>
                                                </h3>
                                                <p>TIA Portal users, typically on Windows machines, do not require any
                                                    additional configuration. They will connect to the VPN without
                                                    needing specific routing instructions. The default OpenVPN
                                                    configuration will suffice for their access needs.</p>
                                                <h3 class="anchor anchorWithStickyNavbar_LWe7"
                                                    id="devices-connected-to-the-plc-additional-configuration-required">
                                                    Devices Connected to the PLC (Additional Configuration Required):<a
                                                        href="#devices-connected-to-the-plc-additional-configuration-required"
                                                        class="hash-link"
                                                        aria-label="Direct link to Devices Connected to the PLC (Additional Configuration Required):"
                                                        title="Direct link to Devices Connected to the PLC (Additional Configuration Required):">​</a>
                                                </h3>
                                                <p>For devices connected to the PLC, an additional configuration line
                                                    needs to be added. This line, iroute 192.168.3.0 255.255.255.0, is
                                                    added to the client configuration file located in
                                                    <code>/etc/openvpn/ccd/</code>.
                                                    The iroute directive instructs the OpenVPN server to route traffic
                                                    to the specified subnet (192.168.3.0/24) through the VPN tunnel.
                                                    This enables devices connected to the PLC to communicate securely
                                                    over the VPN connection.</p>
                                            </div>
                                        </article>
                                        <nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a
                                                class="pagination-nav__link pagination-nav__link--prev" href="step3.html">
                                                <div class="pagination-nav__sublabel">Previous</div>
                                                <div class="pagination-nav__label">Step 3: Configuring OpenVPN</div>
                                            </a></nav>
                                    </div>
                                </div>
                                <div class="col col--3">
                                    <div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop">
                                        <ul class="table-of-contents table-of-contents__left-border">
                                            <li><a href="#overview"
                                                    class="table-of-contents__link toc-highlight">Overview:</a></li>
                                            <li><a href="#adding-users-to-pivpn"
                                                    class="table-of-contents__link toc-highlight">Adding Users to
                                                    PiVPN</a></li>
                                            <li><a href="#configuring-users-for-different-purposes"
                                                    class="table-of-contents__link toc-highlight">Configuring Users for
                                                    Different Purposes</a>
                                                <ul>
                                                    <li><a href="#tia-portal-users-no-configuration-required"
                                                            class="table-of-contents__link toc-highlight">TIA Portal
                                                            Users (No Configuration Required):</a></li>
                                                    <li><a href="#devices-connected-to-the-plc-additional-configuration-required"
                                                            class="table-of-contents__link toc-highlight">Devices
                                                            Connected to the PLC (Additional Configuration
                                                            Required):</a></li>
                                                </ul>
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </main>
                </div>
            </div>
        </div>
        <footer class="footer footer--dark">
            <div class="container container-fluid">
                <div class="footer__bottom text--center">
                    <div class="footer__copyright">Copyright © 2024 Harp Renewables. Developed by Olive IoT</div>
                </div>
            </div>
        </footer>
    </div>
</body>

<!-- Mirrored from harp-docs.vercel.app/docs/deployment/step4 by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 09 Mar 2024 21:36:07 GMT -->

</html>