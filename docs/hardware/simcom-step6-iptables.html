<!doctype html>
<html lang="en" dir="ltr"
    class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-hardware/step6-iptables"
    data-has-hydrated="false">

<!-- Mirrored from harp-docs.vercel.app/docs/hardware/step6-iptables by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 09 Mar 2024 21:35:59 GMT -->
<!-- Added by HTTrack -->
<meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->

<head>
    <meta charset="UTF-8">
    <meta name="generator" content="Docusaurus v3.1.1">
    <title data-rh="true">Step 6 - Configure IP tables | Harp Documentation</title>
    <meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1">
    <meta data-rh="true" name="twitter:card" content="summary_large_image">
    <meta data-rh="true" property="og:image" content="../../img/login-page-logo.png">
    <meta data-rh="true" name="twitter:image" content="../../img/login-page-logo.png">
    <meta data-rh="true" property="og:url" content="step6-iptables">
    <meta data-rh="true" property="og:locale" content="en">
    <meta data-rh="true" name="docusaurus_locale" content="en">
    <meta data-rh="true" name="docsearch:language" content="en">
    <meta data-rh="true" name="docusaurus_version" content="current">
    <meta data-rh="true" name="docusaurus_tag" content="docs-default-current">
    <meta data-rh="true" name="docsearch:version" content="current">
    <meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current">
    <meta data-rh="true" property="og:title" content="Step 6 - Configure IP tables | Harp Documentation">
    <meta data-rh="true" name="description" content="Overview:">
    <meta data-rh="true" property="og:description" content="Overview:">
    <link data-rh="true" rel="icon" href="../../img/favicon.ico">
    <link data-rh="true" rel="canonical" href="step6-iptables">
    <link data-rh="true" rel="alternate" href="step6-iptables" hreflang="en">
    <link data-rh="true" rel="alternate" href="step6-iptables" hreflang="x-default">
    <link rel="alternate" type="application/rss+xml" href="../../blog/rss.xml" title="Harp Documentation RSS Feed">
    <link rel="alternate" type="application/atom+xml" href="../../blog/atom.xml" title="Harp Documentation Atom Feed">
    <link rel="stylesheet" href="../../assets/css/styles.3768ca93.css">
    <script src="../../assets/js/runtime_main.8a1fa19d.js" defer="defer"></script>
    <script src="../../assets/js/main.df785b98.js" defer="defer"></script>
</head>

<body class="navigation-with-keyboard">
    <script>!function () { function t(t) { document.documentElement.setAttribute("data-theme", t) } var e = function () { try { return new URLSearchParams(window.location.search).get("docusaurus-theme") } catch (t) { } }() || function () { try { return localStorage.getItem("theme") } catch (t) { } }(); t(null !== e ? e : "light") }(), function () { try { const c = new URLSearchParams(window.location.search).entries(); for (var [t, e] of c) if (t.startsWith("docusaurus-data-")) { var a = t.replace("docusaurus-data-", "data-"); document.documentElement.setAttribute(a, e) } } catch (t) { } }()</script>
    <div id="__docusaurus">
        <div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn"
                href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div>
                <nav aria-label="Main" class="navbar navbar--fixed-top">
                    <div class="navbar__inner">
                        <div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false"
                                class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30"
                                    aria-hidden="true">
                                    <path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"
                                        d="M4 7h22M4 15h22M4 23h22"></path>
                                </svg></button><a class="navbar__brand" href="../../index.html">
                                <div class="navbar__logo"><img src="../../img/login-page-logo.png" alt="harp-logo"
                                        class="themedComponent_mlkZ themedComponent--light_NVdE" width="130px"><img
                                        src="../../img/login-page-logo.png" alt="harp-logo"
                                        class="themedComponent_mlkZ themedComponent--dark_xIcU" width="130px"></div><b
                                    class="navbar__title text--truncate"></b>
                            </a><a class="navbar__item navbar__link navbar__link--active" href="step1-install-os.html">Hardware</a><a
                                class="navbar__item navbar__link " href="../software/intro.html">Software</a><a aria-current="page"
                                class="navbar__item navbar__link " href="../deployment/intro.html">Deployment</a></div>
                        <div class="navbar__items navbar__items--right">
                            <div class="toggle_vylO colorModeToggle_DEke"></div>
                            <div class="navbarSearchContainer_Bca1"></div>
                        </div>
                    </div>
                    <div role="presentation" class="navbar-sidebar__backdrop"></div>
                </nav>
                <div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0">
                    <div class="docsWrapper_hBAB"><button aria-label="Scroll back to top"
                            class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button>
                        <div class="docRoot_UBD9">
                            <aside class="theme-doc-sidebar-container docSidebarContainer_YfHR">
                                <div class="sidebarViewport_aRkj">
                                    <div class="sidebar_njMd">
                                        <nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG">
                                            <ul class="theme-doc-sidebar-menu menu__list">
                                              
                                                <li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item">
                                                    <div class="menu__list-item-collapsible">
                                                        <a class="menu__link menu__link--sublist menu__link--sublist-caret"
                                                           aria-expanded="false" href="#">CAVLI C10GS</a>
                                                    </div>
                                                    <ul class="menu__list" style="display:none;overflow:visible;height:auto">
                                                        <li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item">
                                                            <a class="menu__link" tabindex="0" href="cavlic10gs-step1-install-os.html">Step 1 - Install OS - Rpi Lite</a>
                                                        </li>
                                                        <li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item">
                                                            <a class="menu__link" tabindex="0" href="cavlic10gs-step2-raspi-config.html">Step 2 - Raspi Config</a>
                                                        </li>
                                                        <li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item">
                                                            <a class="menu__link" tabindex="0" href="cavlic10gs-step3-install-essential.html">Step 3 - Install Dependencies</a>
                                                        </li>
                                                        <li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item">
                                                            <a class="menu__link" tabindex="0" href="cavlic10gs-step4-resolv-config.html">Step 4 - Configure DNS</a>
                                                        </li>
                                                        <li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item">
                                                            <a class="menu__link" tabindex="0" href="cavlic10gs-step5-manage-interface.html">Step 5 - Configure IP</a>
                                                        </li>
                                                        <li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item">
                                                            <a class="menu__link" tabindex="0" href="cavlic10gs-step6-iptables.html">Step 6 - Configure IP tables</a>
                                                        </li>
                                                        <li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item">
                                                            <a class="menu__link" tabindex="0" href="cavlic10gs-step9-setup-serial.html">Step 8 - Create Serial ID</a>
                                                        </li>
                                                        <li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item">
                                                            <a class="menu__link" tabindex="0" href="cavlic10gs-step10-setup-hardware-id.html">Step 9 - Create Hardware ID</a>
                                                        </li>
                                                        <li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item">
                                                            <a class="menu__link" tabindex="0" href="cavlic10gs-step11-setup-ota.html">Step 10 - Create OTA Folder</a>
                                                        </li>
                                                        <li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item">
                                                            <a class="menu__link" tabindex="0" href="cavlic10gs-step12-creating-c_ota.html">Step 11 - Create OTA Script</a>
                                                        </li>
                                                        <li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item">
                                                            <a class="menu__link" tabindex="0" href="cavlic10gs-step13-creating-harp-service.html">Step 12 - Create Harp Service</a>
                                                        </li>
                                                        <li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item">
                                                            <a class="menu__link" tabindex="0" href="cavlic10gs-step14-creating-openvpn-service.html">Step 13 - Create Openvpn Service</a>
                                                        </li>
                                                        <li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item">
                                                            <a class="menu__link" tabindex="0" href="cavlic10gs-step8-config-rc-local.html">Step 14 - Create Watchdog Service</a>
                                                        </li>
                                                    </ul>
                                                </li>
                                                <li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item">
                                                    <div class="menu__list-item-collapsible">
                                                        <a class="menu__link menu__link--sublist menu__link--sublist-caret"
                                                           aria-expanded="false" href="#">SIMCOM</a>
                                                    </div>
                                                    <ul class="menu__list" style="display:none;overflow:visible;height:auto">
                                                        <li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item">
                                                            <a class="menu__link" tabindex="0" href="simcom-step1-install-os.html">Step 1 - Install OS - Rpi Lite</a>
                                                        </li>
                                                        <li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item">
                                                            <a class="menu__link" tabindex="0" href="simcom-step2-raspi-config.html">Step 2 - Raspi Config</a>
                                                        </li>
                                                        <li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item">
                                                            <a class="menu__link" tabindex="0" href="simcom-step3-install-essential.html">Step 3 - Install Dependencies</a>
                                                        </li>
                                                        <li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item">
                                                            <a class="menu__link" tabindex="0" href="simcom-step4-resolv-config.html">Step 4 - Configure DNS</a>
                                                        </li>
                                                        <li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item">
                                                            <a class="menu__link" tabindex="0" href="simcom-step5-manage-interface.html">Step 5 - Configure IP</a>
                                                        </li>
                                                        <li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item">
                                                            <a class="menu__link" tabindex="0" href="simcom-step6-iptables.html">Step 6 - Configure IP tables</a>
                                                        </li>
                                                        <li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item">
                                                            <a class="menu__link" tabindex="0" href="simcom-step7-setup-ppp-simcom.html">Step 7 - wwan on SIMCOM</a>
                                                        </li>
                                                        <li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item">
                                                            <a class="menu__link" tabindex="0" href="simcom-step9-setup-serial.html">Step 8 - Create Serial ID</a>
                                                        </li>
                                                        <li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item">
                                                            <a class="menu__link" tabindex="0" href="simcom-step10-setup-hardware-id.html">Step 9 - Create Hardware ID</a>
                                                        </li>
                                                        <li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item">
                                                            <a class="menu__link" tabindex="0" href="simcom-step11-setup-ota.html">Step 10 - Create OTA Folder</a>
                                                        </li>
                                                        <li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item">
                                                            <a class="menu__link" tabindex="0" href="simcom-step12-creating-c_ota.html">Step 11 - Create OTA Script</a>
                                                        </li>
                                                        <li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item">
                                                            <a class="menu__link" tabindex="0" href="simcom-step13-creating-harp-service.html">Step 12 - Create Harp Service</a>
                                                        </li>
                                                        <li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item">
                                                            <a class="menu__link" tabindex="0" href="simcom-step14-creating-openvpn-service.html">Step 13 - Create Openvpn Service</a>
                                                        </li>
                                                        <li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item">
                                                            <a class="menu__link" tabindex="0" href="simcom-step8-config-rc-local.html">Step 14 - Create Watchdog Service</a>
                                                        </li>
                                                    </ul>
                                                </li>
                                            </ul>
                                        </nav>
                                    </div>
                                </div>
                            </aside>
                    <main class="docMainContainer_TBSr">
                        <div class="container padding-top--md padding-bottom--lg">
                            <div class="row">
                                <div class="col docItemCol_VOVn">
                                    <div class="docItemContainer_Djhp">
                                        <article>
                                            <nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl"
                                                aria-label="Breadcrumbs">
                                                <ul class="breadcrumbs" itemscope=""
                                                    itemtype="https://schema.org/BreadcrumbList">
                                                    <li class="breadcrumbs__item"><a aria-label="Home page"
                                                            class="breadcrumbs__link" href="../../index.html"><svg
                                                                viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT">
                                                                <path
                                                                    d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z"
                                                                    fill="currentColor"></path>
                                                            </svg></a></li>
                                                    <li class="breadcrumbs__item"><span
                                                            class="breadcrumbs__link">Hardware</span>
                                                        <meta itemprop="position" content="1">
                                                    </li>
                                                    <li itemscope="" itemprop="itemListElement"
                                                        itemtype="https://schema.org/ListItem"
                                                        class="breadcrumbs__item breadcrumbs__item--active"><span
                                                            class="breadcrumbs__link" itemprop="name">Step 6 - Configure
                                                            IP tables</span>
                                                        <meta itemprop="position" content="2">
                                                    </li>
                                                </ul>
                                            </nav>
                                            <div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button
                                                    type="button" class="clean-btn tocCollapsibleButton_TO0P">On this
                                                    page</button></div>
                                            <div class="theme-doc-markdown markdown">
                                                <h1>Step 6 - Configure IP tables</h1>
                                                <h2 class="anchor anchorWithStickyNavbar_LWe7" id="overview">Overview:<a
                                                        href="#overview" class="hash-link"
                                                        aria-label="Direct link to Overview:"
                                                        title="Direct link to Overview:">​</a></h2>
                                                <p>Configuring iptables on the Raspberry Pi involves setting up firewall
                                                    rules to enable access from external networks, such as Harp
                                                    Renewables&#x27; VPN server, to the Siemens PLC connected to
                                                    <code>eth1</code>. This configuration allows Harp Renewables to
                                                    access the PLC via the TIA portal for reprogramming or management
                                                    purposes.</p>
                                                <h2 class="anchor anchorWithStickyNavbar_LWe7" id="why-it-is-needed">Why
                                                    it is Needed:<a href="#why-it-is-needed" class="hash-link"
                                                        aria-label="Direct link to Why it is Needed:"
                                                        title="Direct link to Why it is Needed:">​</a></h2>
                                                <p>Accessing the Siemens PLC from external networks requires proper
                                                    network routing and firewall configuration. By enabling IPv4
                                                    forwarding and configuring iptables, you allow traffic to flow
                                                    between the VPN server (connected to <code>eth0</code>) and the PLC
                                                    (connected to <code>eth1</code>) while ensuring security by
                                                    filtering and controlling the traffic flow.</p>
                                                <h2 class="anchor anchorWithStickyNavbar_LWe7"
                                                    id="steps-to-configure-iptables">Steps to Configure iptables:<a
                                                        href="#steps-to-configure-iptables" class="hash-link"
                                                        aria-label="Direct link to Steps to Configure iptables:"
                                                        title="Direct link to Steps to Configure iptables:">​</a></h2>
                                                <h3 class="anchor anchorWithStickyNavbar_LWe7"
                                                    id="enable-ipv4-forwarding">Enable IPv4 Forwarding:<a
                                                        href="#enable-ipv4-forwarding" class="hash-link"
                                                        aria-label="Direct link to Enable IPv4 Forwarding:"
                                                        title="Direct link to Enable IPv4 Forwarding:">​</a></h3>
                                                <p>Set <code>net.ipv4.ip_forward = 1</code> in
                                                    <code>/etc/sysctl.conf</code> to enable IPv4 forwarding between eth0
                                                    and eth1.</p>
                                                <div class="language-bash codeBlockContainer_Ckt0 theme-code-block"
                                                    style="--prism-color:#F8F8F2;--prism-background-color:#282A36">
                                                    <div class="codeBlockContent_biex">
                                                        <pre tabindex="0"
                                                            class="prism-code language-bash codeBlock_bY9V thin-scrollbar"
                                                            style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token function" style="color:rgb(80, 250, 123)">nano</span><span class="token plain"> /etc/sysctl.conf</span><br></span></code></pre>
                                                        <div class="buttonGroup__atx"><button type="button"
                                                                aria-label="Copy code to clipboard" title="Copy"
                                                                class="clean-btn"><span class="copyButtonIcons_eSgA"
                                                                    aria-hidden="true"><svg viewBox="0 0 24 24"
                                                                        class="copyButtonIcon_y97N">
                                                                        <path fill="currentColor"
                                                                            d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z">
                                                                        </path>
                                                                    </svg><svg viewBox="0 0 24 24"
                                                                        class="copyButtonSuccessIcon_LjdS">
                                                                        <path fill="currentColor"
                                                                            d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z">
                                                                        </path>
                                                                    </svg></span></button></div>
                                                    </div>
                                                </div>
                                                <p>Uncomment this line</p>
                                                <div class="language-bash codeBlockContainer_Ckt0 theme-code-block"
                                                    style="--prism-color:#F8F8F2;--prism-background-color:#282A36">
                                                    <div class="codeBlockContent_biex">
                                                        <pre tabindex="0"
                                                            class="prism-code language-bash codeBlock_bY9V thin-scrollbar"
                                                            style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">net.ipv4.ip_forward </span><span class="token operator">=</span><span class="token plain"> </span><span class="token number">1</span><br></span></code></pre>
                                                        <div class="buttonGroup__atx"><button type="button"
                                                                aria-label="Copy code to clipboard" title="Copy"
                                                                class="clean-btn"><span class="copyButtonIcons_eSgA"
                                                                    aria-hidden="true"><svg viewBox="0 0 24 24"
                                                                        class="copyButtonIcon_y97N">
                                                                        <path fill="currentColor"
                                                                            d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z">
                                                                        </path>
                                                                    </svg><svg viewBox="0 0 24 24"
                                                                        class="copyButtonSuccessIcon_LjdS">
                                                                        <path fill="currentColor"
                                                                            d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z">
                                                                        </path>
                                                                    </svg></span></button></div>
                                                    </div>
                                                </div>
                                                <h3 class="anchor anchorWithStickyNavbar_LWe7"
                                                    id="configure-iptables-rules">Configure iptables Rules:<a
                                                        href="#configure-iptables-rules" class="hash-link"
                                                        aria-label="Direct link to Configure iptables Rules:"
                                                        title="Direct link to Configure iptables Rules:">​</a></h3>
                                                <p>Run the following commands to configure iptables rules:</p>
                                                <div class="language-bash codeBlockContainer_Ckt0 theme-code-block"
                                                    style="--prism-color:#F8F8F2;--prism-background-color:#282A36">
                                                    <div class="codeBlockContent_biex">
                                                        <pre tabindex="0"
                                                            class="prism-code language-bash codeBlock_bY9V thin-scrollbar"
                                                            style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">iptables </span><span class="token parameter variable" style="color:rgb(189, 147, 249);font-style:italic">-t</span><span class="token plain"> nat </span><span class="token parameter variable" style="color:rgb(189, 147, 249);font-style:italic">-A</span><span class="token plain"> POSTROUTING </span><span class="token parameter variable" style="color:rgb(189, 147, 249);font-style:italic">-o</span><span class="token plain"> eth1 </span><span class="token parameter variable" style="color:rgb(189, 147, 249);font-style:italic">-j</span><span class="token plain"> MASQUERADE</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">iptables </span><span class="token parameter variable" style="color:rgb(189, 147, 249);font-style:italic">-A</span><span class="token plain"> FORWARD </span><span class="token parameter variable" style="color:rgb(189, 147, 249);font-style:italic">-i</span><span class="token plain"> eth1 </span><span class="token parameter variable" style="color:rgb(189, 147, 249);font-style:italic">-o</span><span class="token plain"> eth0 </span><span class="token parameter variable" style="color:rgb(189, 147, 249);font-style:italic">-m</span><span class="token plain"> state </span><span class="token parameter variable" style="color:rgb(189, 147, 249);font-style:italic">--state</span><span class="token plain"> RELATED,ESTABLISHED </span><span class="token parameter variable" style="color:rgb(189, 147, 249);font-style:italic">-j</span><span class="token plain"> ACCEPT</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">iptables </span><span class="token parameter variable" style="color:rgb(189, 147, 249);font-style:italic">-A</span><span class="token plain"> FORWARD </span><span class="token parameter variable" style="color:rgb(189, 147, 249);font-style:italic">-i</span><span class="token plain"> eth0 </span><span class="token parameter variable" style="color:rgb(189, 147, 249);font-style:italic">-o</span><span class="token plain"> eth1 </span><span class="token parameter variable" style="color:rgb(189, 147, 249);font-style:italic">-j</span><span class="token plain"> ACCEPT</span><br></span></code></pre>
                                                        <div class="buttonGroup__atx"><button type="button"
                                                                aria-label="Copy code to clipboard" title="Copy"
                                                                class="clean-btn"><span class="copyButtonIcons_eSgA"
                                                                    aria-hidden="true"><svg viewBox="0 0 24 24"
                                                                        class="copyButtonIcon_y97N">
                                                                        <path fill="currentColor"
                                                                            d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z">
                                                                        </path>
                                                                    </svg><svg viewBox="0 0 24 24"
                                                                        class="copyButtonSuccessIcon_LjdS">
                                                                        <path fill="currentColor"
                                                                            d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z">
                                                                        </path>
                                                                    </svg></span></button></div>
                                                    </div>
                                                </div>
                                                <h3 class="anchor anchorWithStickyNavbar_LWe7"
                                                    id="persist-iptables-rules">Persist iptables Rules:<a
                                                        href="#persist-iptables-rules" class="hash-link"
                                                        aria-label="Direct link to Persist iptables Rules:"
                                                        title="Direct link to Persist iptables Rules:">​</a></h3>
                                                <p>Create a directory for iptables rules:</p>
                                                <div class="language-bash codeBlockContainer_Ckt0 theme-code-block"
                                                    style="--prism-color:#F8F8F2;--prism-background-color:#282A36">
                                                    <div class="codeBlockContent_biex">
                                                        <pre tabindex="0"
                                                            class="prism-code language-bash codeBlock_bY9V thin-scrollbar"
                                                            style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token function" style="color:rgb(80, 250, 123)">sudo</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">mkdir</span><span class="token plain"> </span><span class="token parameter variable" style="color:rgb(189, 147, 249);font-style:italic">-p</span><span class="token plain"> /etc/iptables/</span><br></span></code></pre>
                                                        <div class="buttonGroup__atx"><button type="button"
                                                                aria-label="Copy code to clipboard" title="Copy"
                                                                class="clean-btn"><span class="copyButtonIcons_eSgA"
                                                                    aria-hidden="true"><svg viewBox="0 0 24 24"
                                                                        class="copyButtonIcon_y97N">
                                                                        <path fill="currentColor"
                                                                            d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z">
                                                                        </path>
                                                                    </svg><svg viewBox="0 0 24 24"
                                                                        class="copyButtonSuccessIcon_LjdS">
                                                                        <path fill="currentColor"
                                                                            d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z">
                                                                        </path>
                                                                    </svg></span></button></div>
                                                    </div>
                                                </div>
                                                <p>Save the iptables rules to a file:</p>
                                                <div class="language-bash codeBlockContainer_Ckt0 theme-code-block"
                                                    style="--prism-color:#F8F8F2;--prism-background-color:#282A36">
                                                    <div class="codeBlockContent_biex">
                                                        <pre tabindex="0"
                                                            class="prism-code language-bash codeBlock_bY9V thin-scrollbar"
                                                            style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token function" style="color:rgb(80, 250, 123)">sudo</span><span class="token plain"> iptables-save </span><span class="token operator">&gt;</span><span class="token plain"> /etc/iptables/rules.v4</span><br></span></code></pre>
                                                        <div class="buttonGroup__atx"><button type="button"
                                                                aria-label="Copy code to clipboard" title="Copy"
                                                                class="clean-btn"><span class="copyButtonIcons_eSgA"
                                                                    aria-hidden="true"><svg viewBox="0 0 24 24"
                                                                        class="copyButtonIcon_y97N">
                                                                        <path fill="currentColor"
                                                                            d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z">
                                                                        </path>
                                                                    </svg><svg viewBox="0 0 24 24"
                                                                        class="copyButtonSuccessIcon_LjdS">
                                                                        <path fill="currentColor"
                                                                            d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z">
                                                                        </path>
                                                                    </svg></span></button></div>
                                                    </div>
                                                </div>
                                                <div class="language-bash codeBlockContainer_Ckt0 theme-code-block"
                                                    style="--prism-color:#F8F8F2;--prism-background-color:#282A36">
                                                    <div class="codeBlockContent_biex">
                                                        <pre tabindex="0"
                                                            class="prism-code language-bash codeBlock_bY9V thin-scrollbar"
                                                            style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token function" style="color:rgb(80, 250, 123)">sudo</span><span class="token plain"> systemctl </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">enable</span><span class="token plain"> netfilter-persistent</span><br></span></code></pre>
                                                        <div class="buttonGroup__atx"><button type="button"
                                                                aria-label="Copy code to clipboard" title="Copy"
                                                                class="clean-btn"><span class="copyButtonIcons_eSgA"
                                                                    aria-hidden="true"><svg viewBox="0 0 24 24"
                                                                        class="copyButtonIcon_y97N">
                                                                        <path fill="currentColor"
                                                                            d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z">
                                                                        </path>
                                                                    </svg><svg viewBox="0 0 24 24"
                                                                        class="copyButtonSuccessIcon_LjdS">
                                                                        <path fill="currentColor"
                                                                            d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z">
                                                                        </path>
                                                                    </svg></span></button></div>
                                                    </div>
                                                </div>
                                                <h2 class="anchor anchorWithStickyNavbar_LWe7" id="conclusion">
                                                    Conclusion<a href="#conclusion" class="hash-link"
                                                        aria-label="Direct link to Conclusion"
                                                        title="Direct link to Conclusion">​</a></h2>
                                                <p>By following these steps, you have configured iptables on the
                                                    Raspberry Pi to allow access from Harp Renewables&#x27; VPN server
                                                    to the Siemens PLC connected to <code>eth1</code>. This setup
                                                    enables Harp Renewables to efficiently manage and reprogram the PLC
                                                    via the TIA portal while maintaining security and control over
                                                    network traffic flow.</p>
                                            </div>
                                        </article>
                                        <nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a
                                                class="pagination-nav__link pagination-nav__link--prev"
                                                href="simcom-step5-manage-interface.html">
                                                <div class="pagination-nav__sublabel">Previous</div>
                                                <div class="pagination-nav__label">Step 5 - Configure IP</div>
                                            </a><a class="pagination-nav__link pagination-nav__link--next"
                                                href="simcom-step7-setup-ppp-simcom.html">
                                                <div class="pagination-nav__sublabel">Next</div>
                                                <div class="pagination-nav__label">Step 7 - wwan on SIMCOM</div>
                                            </a></nav>
                                    </div>
                                </div>
                                <div class="col col--3">
                                    <div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop">
                                        <ul class="table-of-contents table-of-contents__left-border">
                                            <li><a href="#overview"
                                                    class="table-of-contents__link toc-highlight">Overview:</a></li>
                                            <li><a href="#why-it-is-needed"
                                                    class="table-of-contents__link toc-highlight">Why it is Needed:</a>
                                            </li>
                                            <li><a href="#steps-to-configure-iptables"
                                                    class="table-of-contents__link toc-highlight">Steps to Configure
                                                    iptables:</a>
                                                <ul>
                                                    <li><a href="#enable-ipv4-forwarding"
                                                            class="table-of-contents__link toc-highlight">Enable IPv4
                                                            Forwarding:</a></li>
                                                    <li><a href="#configure-iptables-rules"
                                                            class="table-of-contents__link toc-highlight">Configure
                                                            iptables Rules:</a></li>
                                                    <li><a href="#persist-iptables-rules"
                                                            class="table-of-contents__link toc-highlight">Persist
                                                            iptables Rules:</a></li>
                                                </ul>
                                            </li>
                                            <li><a href="#conclusion"
                                                    class="table-of-contents__link toc-highlight">Conclusion</a></li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </main>
                </div>
            </div>
        </div>
        <footer class="footer footer--dark">
            <div class="container container-fluid">
                <div class="footer__bottom text--center">
                    <div class="footer__copyright">Copyright © 2024 Harp Renewables. Developed by Olive IoT</div>
                </div>
            </div>
        </footer>
    </div>
</body>

<!-- Mirrored from harp-docs.vercel.app/docs/hardware/step6-iptables by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 09 Mar 2024 21:35:59 GMT -->

</html>